@page "/"
@using VerstaTestTask.Extensions
@using VerstaTestTask.Models

<PageTitle>Заказы</PageTitle>

<RadzenStack Gap="1rem">
      <LocalizedDataGrid @ref=@grid
                             Data="@orders" Count="@count" TItem="Order" LoadData="@LoadData"
                             ColumnWidth="140px"
                             PagerAlwaysVisible="true"
                             LogicalFilterOperator="LogicalFilterOperator.And"
                             IsLoading="@isLoading"
                             AllowMultiColumnSorting="false"
                             PageSizeOptions="@pageSizeOptions"
                             ShowPagingSummary="true"
                             AllowFiltering="true" AllowSorting="true" AllowColumnResize="true"
                             AllowGrouping="true"
                             AllowColumnPicking="true"
                             AllowColumnReorder="true"
                             FilterMode="FilterMode.Advanced"
                             RowDoubleClick="OnRowDoubleClick"
                             FilterPopupRenderMode="PopupRenderMode.OnDemand" FilterCaseSensitivity="FilterCaseSensitivity.CaseInsensitive"
                             AllowPaging="true" PagerHorizontalAlign="HorizontalAlign.Center" PageSize="@pageSize">
        <HeaderTemplate>
            <RadzenStack Orientation="Orientation.Horizontal" AlignItems="AlignItems.Center" Gap="1rem;" Wrap="FlexWrap.Wrap">
                <RadzenButton Icon="add" Click="@CreateOrder" MouseEnter="@(args => ShowTooltip(args, "Создать заказ"))" />
                <RadzenButton Icon="refresh" Click="@(_ => grid.Reload())" MouseEnter="@(args => ShowTooltip(args, "Обновить данные"))" />
                <RadzenButton Icon="filter_alt_off" Click="@ResetFiltersAsync" MouseEnter="@(args => ShowTooltip(args, "Cбросить фильтры"))" />
            </RadzenStack>
        </HeaderTemplate>
        <PagingSummaryTemplate>
            Страница @context.CurrentPage из @context.NumberOfPages <b>(Всего @context.TotalCount записей)</b>
        </PagingSummaryTemplate>
        <Columns>
            <RadzenDataGridColumn TItem="Order" Property="Id" Title="Номер заказа" Filterable=false Groupable=false/>
            <RadzenDataGridColumn TItem="Order" Property="SenderCity.CityName" Title="Город отправителя" />
            <RadzenDataGridColumn TItem="Order" Property="SenderAddress" Title="Адрес отправителя" />
            <RadzenDataGridColumn TItem="Order" Property="RecipientCity.CityName" Title="Город получателя" />
            <RadzenDataGridColumn TItem="Order" Property="RecipientAddress" Title="Адрес получателя" />
            <RadzenDataGridColumn TItem="Order" Property="CargoWeight" Title="Вес груза" Groupable=false />
            <RadzenDataGridColumn TItem="Order" Property="OrderDate" Title="Дата забора груза" />
        </Columns>
    </LocalizedDataGrid> 
</RadzenStack>

